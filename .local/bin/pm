#!/bin/bash

umount_mnt() {
	umount -R /mnt
}

powermenu() {
	options="cancel\nshutdown\nrestart\nRefresh Rate\nScreen Settings\n$(uptime --pretty)"
	selected=$(echo -e "$options" | dmenu -fn "JetBrains Mono Nerd Font")

	case "$selected" in
	"shutdown")
		confirm=$(echo -e "yes\nno" | dmenu -fn "JetBrains Mono Nerd Font")
		[[ $confirm = "yes" ]] && systemctl poweroff || return
		#&& umount_mnt 
		;;
	"restart")
		confirm=$(echo -e "yes\nno" | dmenu -fn "JetBrains Mono Nerd Font")
		[[ $confirm = "yes" ]] && systemctl reboot || return
		#&& umount_mnt 
		;;
	"Refresh Rate")
		confirm=$(echo -e "60\n144" | dmenu -fn "JetBrains Mono Nerd Font")
		if [[ "$confirm" = "60" ]]; then
			xrandr --output eDP-1 --mode 1920x1080 --rate 60
		elif [[ "$confirm" = "144" ]]; then
			xrandr --output eDP-1 --mode 1920x1080 --rate 144
		else
			return
		fi
		;;
	"Screen Settings")
		confirm=$(echo -e "yes\nno" | dmenu -fn "JetBrains Mono Nerd Font")
		[[ $confirm = "yes" ]] && arandr || return
		;;
	"cancel") return ;;
	esac
}

powermenu
