# Project Structure Conventions

## Table of Contents
- [Directory Layout](#directory-layout)
- [Layer Descriptions](#layer-descriptions)
- [File Naming](#file-naming)
- [Import Aliases](#import-aliases)
- [Index Files](#index-files)

---

## Directory Layout

**Style**: Layer-based (NOT feature-based)

```
src/
├── components/           # Shared UI components
│   ├── ui/              # shadcn/ui components (default location)
│   │   ├── button.tsx
│   │   ├── card.tsx
│   │   ├── dialog.tsx
│   │   └── ...
│   ├── layout/          # Layout components
│   │   ├── header.tsx
│   │   ├── sidebar.tsx
│   │   └── footer.tsx
│   └── common/          # Other shared components
│       ├── error-boundary.tsx
│       ├── loading-spinner.tsx
│       └── empty-state.tsx
│
├── hooks/               # Custom React hooks
│   ├── use-debounce.ts
│   ├── use-local-storage.ts
│   └── use-media-query.ts
│
├── lib/                 # Shared utilities
│   ├── utils.ts         # General utilities (cn, etc.)
│   ├── motion.ts        # Animation presets
│   └── queryKeys.ts     # TanStack Query key factory
│
├── pages/               # Route pages/views
│   ├── home.tsx
│   ├── users.tsx
│   └── settings.tsx
│
├── services/            # API and external services
│   ├── http.ts          # Axios instance
│   └── api/             # API endpoint functions
│       ├── users.ts
│       └── posts.ts
│
├── stores/              # Zustand stores
│   └── ui-store.ts
│
├── types/               # Shared TypeScript types
│   ├── api.ts           # API response/error types
│   ├── user.ts
│   └── index.ts         # Re-exports
│
├── App.tsx              # Root component
├── main.tsx             # Entry point
└── index.css            # Global styles + Tailwind
```

---

## Layer Descriptions

### `/components`

All reusable UI components.

| Subdirectory | Purpose | Examples |
|--------------|---------|----------|
| `ui/` | shadcn/ui components | Button, Card, Dialog |
| `layout/` | Page structure | Header, Sidebar, Footer |
| `common/` | Other shared components | ErrorBoundary, LoadingSpinner |

```typescript
// components/ui/button.tsx
// Auto-generated by shadcn/ui CLI

// components/layout/header.tsx
export function Header() {
  return <header>...</header>
}

// components/common/loading-spinner.tsx
export function LoadingSpinner({ size = 'md' }: Props) {
  return <Loader className={sizeClasses[size]} />
}
```

### `/hooks`

Custom React hooks (non-data-fetching).

```typescript
// hooks/use-debounce.ts
export function useDebounce<T>(value: T, delay: number): T {
  const [debouncedValue, setDebouncedValue] = useState(value)

  useEffect(() => {
    const timer = setTimeout(() => setDebouncedValue(value), delay)
    return () => clearTimeout(timer)
  }, [value, delay])

  return debouncedValue
}
```

### `/lib`

Shared utilities and configurations.

```typescript
// lib/utils.ts
import { clsx, type ClassValue } from 'clsx'
import { twMerge } from 'tailwind-merge'

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}

// lib/motion.ts
export const fadeIn: Variants = {
  hidden: { opacity: 0 },
  visible: { opacity: 1 },
}

// lib/queryKeys.ts
export const queryKeys = {
  users: {
    all: ['users'] as const,
    detail: (id: string) => ['users', id] as const,
  },
}
```

### `/pages`

Route-level components (one per route).

```typescript
// pages/users.tsx
export function UsersPage() {
  const { data: users, isLoading } = useUsers()

  if (isLoading) return <LoadingSpinner />

  return (
    <div>
      <h1>Users</h1>
      <UserList users={users} />
    </div>
  )
}
```

### `/services`

API integration layer.

```typescript
// services/http.ts
export const http = axios.create({
  baseURL: import.meta.env.VITE_API_URL,
})

// services/api/users.ts
import { http } from '../http'
import type { User, CreateUserDto } from '@/types'

export const usersApi = {
  getAll: () => http.get<User[]>('/users'),
  getById: (id: string) => http.get<User>(`/users/${id}`),
  create: (data: CreateUserDto) => http.post<User>('/users', data),
  update: (id: string, data: Partial<User>) => http.patch<User>(`/users/${id}`, data),
  delete: (id: string) => http.delete(`/users/${id}`),
}
```

### `/stores`

Zustand stores for UI state.

```typescript
// stores/ui-store.ts
import { create } from 'zustand'

interface UIState {
  sidebarOpen: boolean
  toggleSidebar: () => void
}

export const useUIStore = create<UIState>((set) => ({
  sidebarOpen: true,
  toggleSidebar: () => set((s) => ({ sidebarOpen: !s.sidebarOpen })),
}))
```

### `/types`

Shared TypeScript types.

```typescript
// types/api.ts
export interface ApiError {
  message: string
  code: string
  status: number
}

// types/user.ts
export interface User {
  id: string
  name: string
  email: string
  role: UserRole
}

export type UserRole = 'admin' | 'user' | 'guest'

// types/index.ts
export * from './api'
export * from './user'
```

---

## File Naming

### Conventions

| Type | Convention | Example |
|------|------------|---------|
| Components | kebab-case | `user-card.tsx` |
| Hooks | kebab-case with use- | `use-debounce.ts` |
| Utilities | kebab-case | `query-keys.ts` |
| Types | kebab-case | `user.ts` |
| Stores | kebab-case with -store | `ui-store.ts` |
| Pages | kebab-case | `user-settings.tsx` |

### Component Files

```
user-card.tsx          # Component
user-card.test.tsx     # Tests (if any)
```

### Export Names

```typescript
// ✅ PascalCase for components
export function UserCard() { }

// ✅ camelCase for hooks
export function useDebounce() { }

// ✅ camelCase for utilities
export function formatDate() { }

// ✅ SCREAMING_SNAKE_CASE for constants
export const API_BASE_URL = '...'
```

---

## Import Aliases

### tsconfig.json

```json
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  }
}
```

### vite.config.ts

```typescript
import path from 'path'

export default defineConfig({
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
})
```

### Usage

```typescript
// ✅ Alias imports
import { Button } from '@/components/ui/button'
import { useDebounce } from '@/hooks/use-debounce'
import { cn } from '@/lib/utils'
import type { User } from '@/types'

// ❌ Relative imports (for cross-layer)
import { Button } from '../../../components/ui/button'
```

### When to Use Relative vs Alias

| Import Type | When to Use |
|-------------|-------------|
| `@/...` | Cross-layer imports (components → services) |
| `./...` | Same-directory sibling imports |
| `../...` | AVOID - use alias instead |

---

## Index Files

### When to Use

Use index files for **public APIs** of a directory.

```typescript
// types/index.ts - Re-export all types
export * from './api'
export * from './user'
export * from './post'

// Usage
import type { User, Post, ApiError } from '@/types'
```

### When NOT to Use

Don't create index files for:
- `components/ui/` (shadcn manages this)
- Directories with only 1-2 files
- Internal implementation details

### Pattern

```typescript
// ✅ Barrel export for types
// types/index.ts
export * from './api'
export * from './user'

// ✅ Named exports for utilities
// lib/index.ts
export { cn } from './utils'
export { fadeIn, slideUp } from './motion'

// ❌ Don't barrel-export components (tree-shaking issues)
// components/index.ts - AVOID
export * from './user-card'
export * from './post-card'
```

---

## Quick Reference

```
src/
├── components/          # UI components
│   ├── ui/             # shadcn/ui (auto-managed)
│   ├── layout/         # Header, Sidebar, Footer
│   └── common/         # ErrorBoundary, Spinner
├── hooks/              # Custom hooks (use-*.ts)
├── lib/                # Utilities (utils.ts, motion.ts)
├── pages/              # Route pages
├── services/           # API layer (http.ts, api/*.ts)
├── stores/             # Zustand (*-store.ts)
├── types/              # TypeScript types
├── App.tsx             # Root
├── main.tsx            # Entry
└── index.css           # Styles
```
